<div class="details-container">
  <div class="breadcrumb">
    <a (click)="goBack()" class="back-link" style="cursor: pointer;">
      ← Mon compte
    </a>
  </div>

  <h1 class="page-title">Mon profil</h1>

  <div class="content-wrapper">
    <!-- Left Card: Personal Info -->
    <div class="info-card">
      <div class="card-header">
        <div class="avatar-circle">
          {{ initials }}
        </div>
        <button class="btn-edit" (click)="openEditModal()">
          <i class="fas fa-edit"></i>
        </button>
      </div>

      <div class="card-body">
        <h2 class="user-name">
          {{ user.firstName }} {{ user.lastName }}
        </h2>

        <p *ngIf="isAdmin" class="admin-label">{{ user.adminType }}</p>
        
        <div class="user-details">
          <ng-container *ngIf="!isDentist && !isAdmin">
            <p>Né(e) le {{ user.birthDate }} ({{ user.age }} ans)</p>
            <p><span class="label">Recouvrement :</span> {{ user.recoveryType }}</p>
            <p><span class="label">Groupe Sanguin :</span> {{ user.bloodGroup }}</p>
          </ng-container>
          
          <ng-container *ngIf="isDentist">
             <p>{{ user.speciality || 'Non renseigné' }}</p>
             <p>
               {{ user.address }}<span *ngIf="user.delegation">, {{ user.delegation }}</span><span *ngIf="user.city">, {{ user.city }}</span>
             </p>
          </ng-container>
        </div>
      </div>
    </div>

    <!-- Right Card: Promo/Info (Optional based on screenshot) -->
    
    <!-- Working Hours Card (Dentist Only) -->
    <div class="hours-card" *ngIf="isDentist">
        <div class="card-header">
            <h3>Horaires de travail</h3>
            <button class="btn-edit" (click)="openHoursEditModal()" title="Modifier les horaires">
                <i class="fas fa-edit"></i>
            </button>
        </div>
        
        <div class="hours-grid">
            <div class="day-row" *ngFor="let slot of workingHours">
                <span class="day-name">{{ slot.day }}</span>
                <span class="hours" [class.closed]="slot.isClosed">{{ formatSchedule(slot) }}</span>
            </div>
        </div>
    </div>
  </div>

  <app-patient-details-edit
    *ngIf="showEditModal"
    [userDetails]="user"
    [isDentist]="isDentist"
    [isAdmin]="isAdmin"
    (close)="closeEditModal()"
    (save)="saveDetails($event)">
  </app-patient-details-edit>

  <app-working-hours-edit-modal
    *ngIf="showHoursEditModal"
    [schedule]="workingHours"
    (close)="closeHoursEditModal()"
    (save)="saveHours($event)">
  </app-working-hours-edit-modal>
</div>
