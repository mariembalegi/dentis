<div class="booking-flow-container">
    <div class="left-panel">
      <h1>Prenez votre rendez-vous en ligne</h1>
      <p class="subtitle">Renseignez les informations suivantes</p>
  
      <div class="booking-step-container">
        <a class="back-link" (click)="goBack()">← Étape précédente</a>
  
        <h2>Sélectionnez le motif de consultation</h2>
        <p style="font-size: 13px; color: #666; margin-bottom: 10px;">Vous pouvez sélectionner plusieurs services.</p>
  
        <div class="reasons-list">
          <div class="reason-item" *ngFor="let category of categories" 
               (click)="toggleCategory(category)"
               [class.selected]="isSelected(category)">
            
             <div class="left-content" style="display: flex; align-items: center; gap: 10px;">
                <div class="checkbox-mock">
                    <i class="far fa-square" *ngIf="!isSelected(category)" style="color: #ccc; font-size: 16px;"></i>
                    <i class="fas fa-check-square" *ngIf="isSelected(category)" style="color: #D04747; font-size: 16px;"></i>
                </div>
                <span class="reason-name">{{ category.name }}</span>
             </div>
            
            <span class="reason-price">{{ category.price }} TND</span>
          </div>
        </div>

        <div class="actions-footer">
           <!-- Removed standalone continue button, will integrate with booking flow -->
        </div>

        <div class="booking-section-separator" style="margin: 30px 0; border-top: 1px solid #eee;"></div>

        <h2>Choisissez la date de consultation</h2>
        <div class="slots-container">
            <div class="day-group" *ngFor="let day of availableSlots">
                <div class="day-header" [class.expanded]="day.expanded" (click)="toggleDay(day)">
                    <span>{{ day.dateDisplay }}</span>
                    <i class="fas" [class.fa-chevron-up]="day.expanded" [class.fa-chevron-down]="!day.expanded"></i>
                </div>
                <div class="day-slots" *ngIf="day.expanded">
                    <button class="slot-btn" 
                            *ngFor="let time of day.times" 
                            [class.selected]="isSlotSelected(day.dateRaw, time)"
                            (click)="selectSlot(day.dateRaw, time)">
                        {{ time }}
                    </button>
                    <div *ngIf="day.times.length === 0" style="font-size: 13px; color: #777; padding: 10px;">Aucun créneau disponible</div>
                </div>
            </div>
            
            <div class="actions-footer" style="margin-top: 24px; display: flex; justify-content: flex-end;">
                <button class="btn-continue" 
                        [disabled]="selectedCategories.length === 0 || !selectedSlot"
                        (click)="confirmBooking()">
                    CONFIRMER LE RENDEZ-VOUS
                </button>
            </div>
        </div>
      </div>
    </div>
  
    <div class="right-panel">
      <div class="practitioner-card">
        <div class="card-header">
            <!-- Placeholder for logo or image if needed -->
             <div class="avatar-placeholder">
                 <img *ngIf="dentistPhoto" [src]="dentistPhoto" alt="Dr {{ dentistName }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;">
             </div>
            <div class="header-text">
                <h3>{{ dentistName }}</h3>
                <p class="specialty">{{ dentistSpecialty }}</p>
            </div>
        </div>
        
        <div class="appointment-details">
          <h4>Votre rendez-vous en détail</h4>
          <ul>
            <li><i class="fas fa-check"></i> Pour {{ patientName }}</li>
            <li><i class="fas fa-check"></i> {{ dentistAddress }}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
