<div class="booking-flow-container">
    <div class="left-panel">
      <h1>Prenez votre rendez-vous en ligne</h1>
      <p class="subtitle">Renseignez les informations suivantes</p>
  
      <div class="booking-step-container">
        <a class="back-link" (click)="goBack()">← Étape précédente</a>
  
        <h2>Choisissez la date de consultation</h2>
  
        <div class="slots-container">
            <div class="day-group" *ngFor="let day of availabilityDays">
                <div class="day-header" [class.expanded]="day.expanded" (click)="toggleDay(day)">
                    <span>{{ day.dateDisplay }}</span>
                    <i class="fas" [class.fa-chevron-up]="day.expanded" [class.fa-chevron-down]="!day.expanded"></i>
                </div>
                <div class="day-slots" *ngIf="day.expanded">
                    <button class="slot-btn" 
                            *ngFor="let slot of day.slots" 
                            [class.selected]="isSlotSelected(day.dateRaw, slot)"
                            (click)="selectSlot(day, slot)">
                        {{ slot }}
                    </button>
                    <div *ngIf="day.slots.length === 0" style="font-size: 13px; color: #777;">Aucun créneau disponible</div>
                </div>
            </div>

            <div *ngIf="availabilityDays.length === 0" style="padding: 20px; text-align: center; color: #777;">
                Aucune disponibilité trouvée
            </div>
        </div>

        <div class="actions-footer" style="margin-top: 24px; display: flex; justify-content: flex-end;">
            <button class="btn-confirm" 
                    [disabled]="!selectedSlot"
                    (click)="confirmBooking()">
                CONFIRMER LE RENDEZ-VOUS
            </button>
        </div>
      </div>
    </div>
  
    <div class="right-panel">
      <div class="practitioner-card">
        <div class="card-header">
            <div class="avatar-placeholder">
                <img *ngIf="dentistPhoto" [src]="dentistPhoto" style="width:100%; height:100%; object-fit:cover; border-radius:4px;">
                <i *ngIf="!dentistPhoto" class="fas fa-user-md" style="color: #0076bd;"></i>
            </div>
            <div class="header-text">
                <h3>{{ dentistName }}</h3>
                <p class="specialty">{{ dentistSpecialty }}</p>
            </div>
        </div>
        
        <div class="appointment-details">
          <h4>Votre rendez-vous en détail</h4>
          <ul>
            <li *ngIf="patientName"><i class="fas fa-check"></i> Pour {{ patientName }}</li>
            <li><i class="fas fa-check"></i> {{ dentistAddress }}</li>
            <li *ngIf="selectedCategoryName"><i class="fas fa-check"></i> {{ selectedCategoryName }} 
                <span *ngIf="selectedCategoryPrice" style="font-weight: bold;"> - {{ selectedCategoryPrice }} TND</span>
            </li>
            <li *ngIf="selectedSlot"><i class="fas fa-check"></i> {{ selectedSlot.date }} à {{ selectedSlot.time }}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
